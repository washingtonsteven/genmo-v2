<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>ðŸ“• Genmo v2 ðŸ“— <!-- omit in toc --></h1>
<h2>New, updated, sleeker, sexier, adjectivier, and cheesier than ever! ðŸ§€ <!-- omit in toc --></h2>
<p>Genmo is a text narrative engine that is meant to be pluggable into any sort of frontend.</p>
<hr>
<h2>Table of Contents <!-- omit in toc --></h2>
<ul>
<li><a href="#installation--quick-start">Installation / Quick Start</a>
<ul>
<li><a href="#install">Install</a></li>
<li><a href="#quick-start">Quick Start</a></li>
</ul>
</li>
<li><a href="#generating-stories">Generating Stories</a>
<ul>
<li><a href="#story-data">Story Data</a></li>
<li><a href="#inserting-data-into-text">Inserting data into text</a></li>
<li><a href="#prompting-for-data">Prompting for data</a></li>
<li><a href="#conditional-links">Conditional Links</a></li>
<li><a href="#managing-player-inventory">Managing Player Inventory</a></li>
<li><a href="#passage-helpers">Passage Helpers</a>
<ul>
<li><a href="#inventory_has-and-inventory_not_has"><code>inventory_has</code> and <code>inventory_not_has</code></a></li>
<li><a href="#changed"><code>changed</code></a></li>
</ul>
</li>
<li><a href="#data-helpers">Data Helpers</a>
<ul>
<li><a href="#data_set-and-passage_data_set"><code>data_set</code> and <code>passage_data_set</code></a></li>
<li><a href="#inventory_add-and-inventory_remove"><code>inventory_add</code> and <code>inventory_remove</code></a></li>
</ul>
</li>
<li><a href="#comments">Comments</a></li>
</ul>
</li>
<li><a href="#usage">Usage</a>
<ul>
<li><a href="#options">Options</a>
<ul>
<li><a href="#outputfunction"><code>outputFunction</code></a></li>
<li><a href="#errorfunction"><code>errorFunction</code></a></li>
<li><a href="#customhelpers"><code>customHelpers</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#api">API</a>
<ul>
<li><a href="#new-genmostorydata-options--"><code>new Genmo(storyData, options = {})</code></a></li>
<li><a href="#outputcurrentpassage"><code>outputCurrentPassage()</code></a></li>
<li><a href="#getcurrentpassage"><code>getCurrentPassage()</code></a></li>
<li><a href="#followlinkobjectstring"><code>followLink(Object|String)</code></a></li>
<li><a href="#respondtopromptobject"><code>respondToPrompt(Object)</code></a></li>
<li><a href="#getinventory"><code>getInventory()</code></a></li>
<li><a href="#updateinventoryobject"><code>updateInventory(Object)</code></a></li>
<li><a href="#setdataobject"><code>setData(Object)</code></a></li>
<li><a href="#getdata"><code>getData()</code></a></li>
<li><a href="#getpassagedatapassage"><code>getPassageData(passage)</code></a></li>
<li><a href="#getrawpassagedatapassage"><code>getRawPassageData(passage)</code></a></li>
<li><a href="#addhelperhelpername-helperfn"><code>addHelper(helperName, helperFn)</code></a></li>
<li><a href="#removehelperhelpername"><code>removeHelper(helperName)</code></a></li>
<li><a href="#state"><code>state</code></a></li>
</ul>
</li>
</ul>
<hr>
<h3>Installation / Quick Start</h3>
<h4>Install</h4>
<pre class="prettyprint source lang-sh"><code>yarn add @esaevian/genmo-v2
# or
npm install @esaevian/genmo-v2
</code></pre>
<h4>Quick Start</h4>
<ol>
<li>Install <a href="https://twinery.org/">Twine</a> and the <a href="https://github.com/lazerwalker/twison">Twison</a> story format</li>
<li>Write your story in Twine, save the JSON within your project.</li>
<li>Import Genmo, initialize it with your story data, and define an <code>outputFunction</code> to display the current passage:</li>
</ol>
<pre class="prettyprint source lang-js"><code>import { Genmo } from &quot;@esaevian/genmo-v2&quot;;
import MyStoryJSON from &quot;./MyStory.json&quot;;

const story = new Genmo(MyStoryJSON, {
  outputFunction(passage) {
    // Display `passage.text` for user, and `passage.links` for navigation
  },
  errorFunction(err) {
    // Deal with `err`
  },
});
</code></pre>
<h3>Generating Stories</h3>
<p>Stories are in JSON format, as written in <a href="http://twinery.org/">Twine</a> using the <a href="https://github.com/lazerwalker/twison">Twison</a> story format. Create your story in Twine as usual, then use the Twison story format to export your story to a <code>.json</code> file.</p>
<p>Currently, no Harlowe functions are available (unless you implement them in your <code>outputFunction</code>, <a href="#outputFunction">see below</a>). Any directives will be output in the JSON with zero processing.</p>
<p>If you do not want your links to show up in the body text, you can separate them with a newline, 3 dashes, and another newline:</p>
<pre class="prettyprint source"><code>Normal passage text.

---

[[Page 2]]
[[Page 3]]
</code></pre>
<p>This will generate a <code>passageText</code> variable on each passage that only has the text above that divider.</p>
<h4>Story Data</h4>
<p>You can update story data upon entering a passage by including a JSON object describing the data you want to change under the links with a similar separator for the link</p>
<pre class="prettyprint source"><code>Normal passage text.

---

[[Page 2]]
[[Page 3]]

---
{
  &quot;hp&quot;:10,
  &quot;wizard_staff&quot;: true,
  &quot;player_name&quot;: &quot;Steve&quot;
}

</code></pre>
<p>Data is cumulative, so you don't need to specify the entire data object in each passage. You can use <code>++</code> or <code>--</code> prefixes to increment/decrement a variable by a value:</p>
<pre class="prettyprint source"><code>The orc hits you for 2 damage!

---

[[Fight back]]

---

{
  &quot;hp&quot;:&quot;--2&quot;
}
</code></pre>
<p>After the last two example blocks, <code>hp</code> will be set to <code>8</code></p>
<p>You can also define story data using a Handlebars helper. <a href="#data_set-and-passage_data_set">Click here to read more about the helpers</a></p>
<h4>Inserting data into text</h4>
<p>Genmo uses <a href="https://handlebarsjs.com/">Handlebars</a> to replace variables from your data within the text.<br>
For example:</p>
<pre class="prettyprint source"><code>The orc hits you for 2 damage!
Your HP is {{hp}}

---

[[Fight back]]

---

{
  &quot;hp&quot;:&quot;--2&quot;
}
</code></pre>
<p><code>passageText</code> will be:</p>
<pre class="prettyprint source"><code>The orc hits you for 2 damage!
Your HP is 8
</code></pre>
<h4>Prompting for data</h4>
<p>Data can also be prompted for by the player. Any data keys that need to be prompted can be indicated in the data JSON with a <code>&gt;&gt;</code>. For example:</p>
<pre class="prettyprint source"><code>Normal passage text.

---

[[Page 2]]
[[Page 3]]

---
{
  &quot;hp&quot;:10,
  &quot;wizard_staff&quot;: true,
  &quot;player_name&quot;: &quot;>>&quot;
}

</code></pre>
<p>This will cause Genmo to return a passage object that will indicate that <code>player_name</code> needs input from the player. Otherwise, any instance of <code>#{player_name}</code> in <code>passageText</code> will not be replaced.</p>
<p>See <a href="#respondtopromptobject">respondToPrompt</a> for the API on how to properly log player responses.</p>
<h4>Conditional Links</h4>
<p>You can use named links (using <code>-&gt;</code>) in order to specify conditions for the link to appear, separated from the name with <code>||</code>:</p>
<pre class="prettyprint source"><code>Normal passage text

---

[[Go home]]
[[Go to the hospital||hp lt 10->Go to the hospital]]
</code></pre>
<p>This will only display <code>Go to the hospital</code> if the variable <code>hp</code> is less than <code>10</code></p>
<p>The operators available are:</p>
<ul>
<li><code>lt</code>: less than</li>
<li><code>gt</code>: greater than</li>
<li><code>lte</code>: less than or equal</li>
<li><code>gte</code>: greater than or equal</li>
<li><code>eq</code>: equals</li>
<li><code>seq</code>: strict equals (<code>===</code>)</li>
</ul>
<p><code>lt</code>, <code>gt</code>, <code>lte</code>, and <code>gte</code> will convert any variable to a Number before comparison.</p>
<p>The displayed name will also have anything after <code>||</code> removed before display/<code>outputFunction</code></p>
<h4>Managing Player Inventory</h4>
<p>Genmo can keep track of a player's inventory as a set of key/value pairs where the key is the name of the item, and the value is how many they have. Currently, Genmo only supports adding one of an individual item at a time (i.e. per passage). For player resources like currencies, use <a href="#story-data">data</a> instead.</p>
<p>Inventory is indicated in the story text via the <code>inventory_add</code> and <code>inventory_remove</code> keys:</p>
<pre class="prettyprint source"><code>Normal passage text.

---

[[Page 2]]
[[Page 3]]

---
{
  &quot;inventory_add&quot;: &quot;wand_of_gamelon&quot;
}

</code></pre>
<p>This will add one (1) <code>wand_of_gamelon</code> to the player's inventory. Conversely:</p>
<pre class="prettyprint source"><code>Normal passage text.

---

[[Page 2]]
[[Page 3]]

---
{
  &quot;inventory_remove&quot;: &quot;broken_sword&quot;
}

</code></pre>
<p>Will remove one (1) <code>broken_sword</code> from the inventory. Note that inventory items cannot go negative.</p>
<p><strong>Recommendation:</strong> Genmo's inventory is a simple key/value pair, looking something like this:</p>
<pre class="prettyprint source lang-js"><code>{
  &quot;bounce_bracelet&quot;: 1,
  &quot;magic_ring&quot;: 2,
  &quot;bread_loaves&quot;: 5
}
</code></pre>
<p>Naturally, there isn't a lot of information in this about <em>what</em> the inventory items actually are. The keys in this object can (should?) be used as keys in your application's item database so details about items (descriptions, images, flavor text) can be kept in application code.</p>
<p><strong>Recommendation:</strong> Keep in mind that inventory items are usually only added or removed one at a time. While Genmo does offer the ability to add multiples of an item, consider whether you want to use the inventory system for this, or if you just want to use a standard data. For example, while &quot;The Haunted Coin of Gorgnax&quot; would be a good inventory item, &quot;coins&quot; used as currency (which the player can have tens, hundreds, or even thousands of), would be better used as a standard piece of data.</p>
<p>The inventory can also be handled via Helper blocks. <a href="#inventory_add-and-inventory_remove">Click here to read about inventory helpers</a></p>
<h4>Passage Helpers</h4>
<p>Some helpers are available to modify your text on the fly. Shortcodes are typically follow the following format:</p>
<pre class="prettyprint source"><code>{{#shortcodeName arg=&quot;argument1&quot;}Text content here to be modified by the shortcode{{/shortcodeName}}
</code></pre>
<p>If you are familiar with Handlebars, you'll notice that shortcodes look a lot like <a href="https://handlebarsjs.com/guide/block-helpers.html#basic-blocks">block helpers</a>. That's because they are! That means the built-in Handlebars helpers are available for you to use, as well as custom shortcodes mentioned below.</p>
<p><strong>Note:</strong> While not yet available, I'm hoping to add the ability to supply your own custom helpers in the initialization of Genmo.</p>
<h5><code>inventory_has</code> and <code>inventory_not_has</code></h5>
<p>These shortcodes will show/hide the text content based on whether the player has (or doesn't have) a set of specified items in their inventory.</p>
<pre class="prettyprint source"><code>{{#inventory_has items=&quot;coin&quot;}}You have a coin!{{/inventory_has}}
</code></pre>
<p>In the <code>items</code> argument, you can supply a space-separate list of items that the player must have ALL of in order for the text to show:</p>
<pre class="prettyprint source"><code>{{#inventory_has items=&quot;coin book&quot;}}You have a coin and a book{{/inventory_has}}
</code></pre>
<p><code>inventory_not_has</code> works the same, but asserts that a player doesn't have an item. If multiple items are specified, the player must not have any of the items in the list:</p>
<pre class="prettyprint source"><code>{{#inventory_not_has items=&quot;tea coffee&quot;}}You don't have tea OR coffee{{/inventory_not_has}}
</code></pre>
<h5><code>changed</code></h5>
<p>This will let you show/hide text based on whether a piece of data change on the last link navigation (i.e. usage of JSON data/inventory management, the <code>{{#data_set}}</code> helper, or the <code>{{inventory_add/remove}}</code> helpers). Manually updated data/inventory (as in, using <code>updateData</code> or <code>updateInventory</code> directly) will not be counted as a valid change for this.</p>
<pre class="prettyprint source"><code>{{#changed keys=&quot;age&quot;}}Your age changed!{{/changed}}

---

[[Next]]

---

{
  &quot;age&quot;: 17
}
</code></pre>
<p>This will show <code>Your age changed!</code> if, upon entering this passage, the <code>age</code> was updated to 17. However if the player leaves this passage and returns (without <code>age</code> changing somewhere else), the message will not show.</p>
<p>Note that you can also specify an <code>inventory</code> attribute to check if something in the user's inventory has changed. However, if both <code>inventory</code> and <code>keys</code> are present, only <code>keys</code> will be checked.</p>
<pre class="prettyprint source"><code>{{#changed inventory=&quot;coin&quot;}}The number of coins you have changed{{/changed}}
</code></pre>
<p>Right now, there isn't a way to determine whether the change was positive or negative (or neither, in the case of a string change).</p>
<p><em>NB: While you can store complex objects in your data, the <code>{{#changed}}</code> helper may not be super helpful, due to how Javascript compares objects, they will always have changed.</em></p>
<h4>Data Helpers</h4>
<p>Much like the passage helpers above, there are other sets of helpers that allow you to modify the data of your story, if you don't want to use the JSON method outlined above.</p>
<h5><code>data_set</code> and <code>passage_data_set</code></h5>
<p>These are helpers to set data and passage data, like you would in JSON. The following passages are equivalent:</p>
<pre class="prettyprint source"><code>This Passage is using JSON data setting

---

[[Next]]

---

{
  &quot;fruit&quot;: &quot;orange&quot;,
  &quot;passage_data&quot;: {
    &quot;fridge_open&quot;: true
  }
}
</code></pre>
<pre class="prettyprint source"><code>This passage is using data setting via helpers.

{{#data_set fruit=&quot;orange}}{{/data_set}}
{{#passage_data_set fridge_open=&quot;true&quot;}}{{/passage_data_set}}

---

[[Next]]
</code></pre>
<h5><code>inventory_add</code> and <code>inventory_remove</code></h5>
<p>Like <code>data_set</code> and <code>passage_data_set</code>, these are analogous to using <code>inventory_add</code> and <code>inventory_remove</code> JSON keys.</p>
<pre class="prettyprint source"><code>I giveth a bike and a shirt and taketh away a Playstation.

{{#inventory_add items=&quot;bike shirt&quot;}}{{/inventory_add}}
{{#inventory_remove items=&quot;playstation&quot;}}{{/inventory_remove}}
</code></pre>
<p>You can also specify a condition under which the inventory change will be made, similar to <a href="#conditional-links">Conditional Links</a>:</p>
<pre class="prettyprint source"><code>{{#inventory_add items=&quot;alcohol cigarettes&quot; condition=&quot;age gte 18&quot;}}{{/inventory_add}}
</code></pre>
<h4>Comments</h4>
<p>You can insert comments into your Twine story (in you need to notate some particularly complex story decision) using standard <a href="https://handlebarsjs.com/examples/comments.html">Handlebars comments</a>.</p>
<pre class="prettyprint source"><code>{{! NOTE: Zebulon wouldn't do this, rewrite this passage with a Hoobastank song instead}}
Zebulon steps up on stage and blasts out a perfect rendition of Bohemian Rhapsody.
</code></pre>
<h3>Usage</h3>
<pre class="prettyprint source lang-js"><code>import { Genmo } from &quot;genmo-v2&quot;;

// Load in your JSON however you like
import StoryJSON from &quot;story.json&quot;;

const story = new Genmo(StoryJSON, {
  outputFunction: (passage) => {
    // output passage
  },
  errorFunction: (err) => {
    // deal with error
  },
});
</code></pre>
<p>Note that <code>Genmo</code> is not a default export, but a named one. In CommonJS:</p>
<pre class="prettyprint source lang-js"><code>const Genmo = require(&quot;genmo-v2&quot;).Genmo;
</code></pre>
<h4>Options</h4>
<h5><code>outputFunction</code></h5>
<pre class="prettyprint source lang-js"><code>const outputFunction = (passage) => {};
</code></pre>
<p>You will receive the entire &quot;passage&quot; object from the StoryJSON generated by Twine:</p>
<ul>
<li><code>text</code> : Main passage text (including links and unprocessed Harlowe directives)</li>
<li><code>links</code>: Array of links in this passage
<ul>
<li><code>name</code>: The display text for this link</li>
<li><code>link</code>: The name of the passage this link links to</li>
<li><code>pid</code>: The Passage Id of the passage this link links to</li>
</ul>
</li>
<li><code>name</code>: The name of this passage</li>
<li><code>pid</code>: The Passage Id of this passage</li>
<li><code>position</code>: The position of this passage within Twine
<ul>
<li><code>x</code>: x position of the passage. String.</li>
<li><code>y</code>: y position of the passage. String.</li>
</ul>
</li>
<li><code>needsPrompt</code>: An array of variables that require user input.
<ul>
<li><code>key</code>: The name of the variable</li>
<li><code>complete</code>: (Boolean) Whether we already have data for this key.</li>
</ul>
</li>
</ul>
<p>In addition you will recieve <code>passageText</code> (<code>passage.passageText</code>) which is a subset of the text above the link divider (see <a href="#generating-stories">Generating Stories</a> above)</p>
<p>Returning any value from the <code>outputFunction</code> will also return that value from functions that &quot;output&quot; (i.e. <code>Genmo.outputCurrentPassage</code>)</p>
<h5><code>errorFunction</code></h5>
<pre class="prettyprint source lang-js"><code>const errorFunction = (err) => {};
</code></pre>
<p>This will be called if you do anything illegal with Genmo (except call its constructor without storyData, in which case an <code>Error</code> will be thrown).</p>
<p>If your <code>errorFunction</code> returns a value, any function that calls your <code>errorFunction</code> will also return that value.</p>
<p>Possible errors are available as an export named <code>ERRORS</code></p>
<h5><code>customHelpers</code></h5>
<pre class="prettyprint source lang-js"><code>{
  helper_name: (handlebarsOptions, options) => {

  },
  another_helper: (handlebarsOptions, options) => {

  }
}
</code></pre>
<p>Supply your own set of Handlebars helpers for Genmo to use. <code>handlebarsOptions</code> is the options object from <a href="https://handlebarsjs.com/guide/block-helpers.html#basic-blocks">Handlebars helpers</a>, while <code>options</code> contains <code>genmo</code>, for you to access directly. Be sure to pass <code>genmo.getData()</code> into <code>handlebarsOptions.fn()</code> in order to properly interpolate any data within your custom block.</p>
<p>Ex.</p>
<pre class="prettyprint source lang-js"><code>new Genmo(StoryData, {
  customHelpers: {
    bold: (handlebarsOptions, options) => {
      return `&lt;strong>${handlebarsOptions.fn(
        options.genmo.getData()
      )}&lt;/strong>`;
    },
  },
});
</code></pre>
<pre class="prettyprint source lang-js"><code>import { ERRORS } from &quot;genmo-v2&quot;;
</code></pre>
<h3>API</h3>
<h4><code>new Genmo(storyData, options = {})</code></h4>
<p>Constructs a new Genmo Object. Options are detailed above.</p>
<h4><code>outputCurrentPassage()</code></h4>
<pre class="prettyprint source lang-js"><code>story.outputCurrentPassage();
</code></pre>
<p>This function will call your <code>outputFunction</code> with the current passage.<br>
If your <code>outputFunction</code> returns a value, it will be returned here as well.</p>
<h4><code>getCurrentPassage()</code></h4>
<pre class="prettyprint source lang-js"><code>story.getCurrentPassage();
</code></pre>
<p>Returns the raw passage object for the current passage. This is the same object that is passed to your <code>outputFunction</code>.</p>
<h4><code>followLink(Object|String)</code></h4>
<pre class="prettyprint source lang-js"><code>story.followLink(link);
</code></pre>
<p>This will set the <code>currentPassage</code> to the passage linked to in the provided <code>link</code>. This will only work if the link you are trying to follow is on the <code>currentPassage</code>. You may pass in the entire object from the <code>links</code> array in the passage, or just the <code>pid</code> of the passage that link goes to.</p>
<p>Attempting to follow an invalid link (the link doesn't exist, is not a part of this passage, or does not link to a passage that exists, etc.) will call your <code>errorFunction</code> and return any value you had set there.</p>
<h4><code>respondToPrompt(Object)</code></h4>
<pre class="prettyprint source lang-js"><code>story.respondToPrompt({ variableName: &quot;receivedValue&quot; });
</code></pre>
<p>See <a href="#prompting-for-data">Prompting for data</a>.</p>
<p>If, in <code>outputFunction</code>, <code>passage</code> has a key called <code>needsPrompt</code>, you should query the user for the keys involved (using <code>passage.needsPrompt[i].key</code>). Once the user has provided an answer, you can call <code>respondToPrompt</code> with an object mapping the variable name (<code>key</code>) to the user's answer (using whatever method of input you desire).</p>
<p>Note that the object in <code>respondToPrompt</code> will only handle one variable at a time. So if you have multiple prompts, you will call <code>respondToPrompt</code> multiple times for each.</p>
<p>Once you call <code>respondToPrompt</code> for a given <code>key</code>, it will still show up in the <code>passage.needsPrompt</code> array, however it will have a property <code>complete</code> set to <code>true</code> (i.e. <code>passage.needsPrompt[i].complete</code>). It is up to you if you wish to re-prompt the user or leave the data as is.</p>
<p>Note this function will throw an error if you are attempting to respond to a prompt that does not exist on the current passage (<code>story.getCurrentPassage()</code>).</p>
<h4><code>getInventory()</code></h4>
<pre class="prettyprint source lang-js"><code>story.getInventory();
</code></pre>
<p>This simply returns the key/value pairs to indicate quantities in the player inventory. This is the same as <code>genmo.state.data.inventory</code>.</p>
<h4><code>updateInventory(Object)</code></h4>
<pre class="prettyprint source lang-js"><code>story.updateInventory(inventoryUpdateObject);
</code></pre>
<p>This will allow you to add items outside of specifying them in Twine. An object is provided which indicates which items are being updated, as well as a delta of their quantities:</p>
<pre class="prettyprint source lang-js"><code>genmo.updateInventory({
  broom: 1,
  fishhook: -2,
});
</code></pre>
<p>The above call will add one (1) broom to the inventory, and remove two (2) fishhooks.</p>
<h4><code>setData(Object)</code></h4>
<pre class="prettyprint source lang-js"><code>story.setData(myDataObject);
</code></pre>
<p>Allows you to set arbitrary data to the story's data.</p>
<h4><code>getData()</code></h4>
<pre class="prettyprint source lang-js"><code>story.getData();
</code></pre>
<p>Returns the current data object for the story</p>
<h4><code>getPassageData(passage)</code></h4>
<pre class="prettyprint source lang-js"><code>story.getPassageData(story.getCurrentPassage());
</code></pre>
<p>Gets the <code>passage_data</code> object for the current passage i.e. transient data that is only set on the passage given.</p>
<h4><code>getRawPassageData(passage)</code></h4>
<pre class="prettyprint source lang-js"><code>story.getRawPassageData(story.getCurrentPassage()); // Or any other passage
</code></pre>
<p>Gets the parsed data for the current passage. Note that any deltas (i.e. <code>{ s: &quot;--2&quot;}</code>) will be returned unchanged, that is, as literal strings. Will return null if there is no data for the current passage. This includes <code>passage_data</code>, if set. If you just want just <code>passage_data</code> use <code>getPassageData(passage)</code></p>
<h4><code>addHelper(helperName, helperFn)</code></h4>
<pre class="prettyprint source lang-js"><code>story.addHelper(
  &quot;bold&quot;,
  (handlebarsOptions, options) =>
    `&lt;strong>${handlebarsOptions.fn(options.genmo.getData())}&lt;/strong>`
);
</code></pre>
<p>Adds a helper that will be used throughout the rest of the rendering of the story. <a href="#customhelpers">See options.customHelpers</a></p>
<h4><code>removeHelper(helperName)</code></h4>
<pre class="prettyprint source lang-js"><code>story.removeHelper(&quot;bold&quot;);
</code></pre>
<p>Removes a helper with the name given, meaning blocks using this helper will no longer be rendered (their content will not display at all).</p>
<h4><code>state</code></h4>
<pre class="prettyprint source lang-js"><code>story.state;

story.state.storyData;

story.state.currentPassage;

story.state.data;
</code></pre>
<p>Genmo keeps track of its state in <code>state</code>, there are several properties:</p>
<ul>
<li><code>storyData</code>: The complete storyData passed in the Genmo constructor
<ul>
<li><code>passages</code>: Array of passage objects</li>
<li><code>name</code>: Name of the Story (as set in Twine)</li>
<li><code>startnode</code>: The <code>pid</code> of the starting passage</li>
<li><code>creator</code>: The name of the app that created the story (usually &quot;Twine&quot;)</li>
<li><code>creator-version</code>: Version of Twine when this story was made</li>
<li><code>ifid</code>: String representing an ID to be used in the <a href="https://ifdb.tads.org/help-ifid">Interactive Fiction Database</a></li>
</ul>
</li>
<li><code>currentPassage</code>: The current passage set. Passage properties are detailed in the <a href="#outputFunction"><code>outputFunction</code> section</a> above</li>
</ul>
<p><code>story.state.data</code> is the list of custom data applied by inline JSON (or Handlebars helpers) in Twine.</p>
<p><strong>As a general rule:</strong> <code>state</code> should only be read from, not written to. Writing to state outside of the provided functions (<code>followLink()</code>, etc) may cause inconsistent behavior.</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-utils_conditionalFilters.html">utils/conditionalFilters</a></li><li><a href="module-utils_reducerUtils.html">utils/reducerUtils</a></li></ul><h3>Classes</h3><ul><li><a href="Genmo.html">Genmo</a></li><li><a href="GenmoError.html">GenmoError</a></li><li><a href="InvalidDataKeyError.html">InvalidDataKeyError</a></li><li><a href="InvalidLinkError.html">InvalidLinkError</a></li><li><a href="InvalidPassageDataError.html">InvalidPassageDataError</a></li><li><a href="InvalidStoryError.html">InvalidStoryError</a></li><li><a href="LinkNotFoundError.html">LinkNotFoundError</a></li><li><a href="NoStartingNodeError.html">NoStartingNodeError</a></li><li><a href="PassageNotFoundError.html">PassageNotFoundError</a></li><li><a href="StatefulComponent.html">StatefulComponent</a></li></ul><h3>Global</h3><ul><li><a href="global.html#followLinkReducer">followLinkReducer</a></li><li><a href="global.html#getDataHelpers">getDataHelpers</a></li><li><a href="global.html#getPassageHelpers">getPassageHelpers</a></li><li><a href="global.html#inventoryHasHelper">inventoryHasHelper</a></li><li><a href="global.html#promptAnswerReducer">promptAnswerReducer</a></li><li><a href="global.html#setDataHelper">setDataHelper</a></li><li><a href="global.html#setDataReducer">setDataReducer</a></li><li><a href="global.html#updateData">updateData</a></li><li><a href="global.html#updateInventory">updateInventory</a></li><li><a href="global.html#updateInventoryReducer">updateInventoryReducer</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Sun Mar 28 2021 00:36:09 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>